(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{6475:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(5893),s=a(7294),i=a(5989),d=a(2286),o=a.n(d),r=a(4184),l=a.n(r),c=a(5303),u=a(2033),p=a.n(u),m=function(e){var t=e.includeText,a=e.source,s="gate"===a?"gate":"nudge",i=function(e){switch(e.message.type){case"SUCCESS":location.reload();break;case"CLOSE":!function(){var e=document.querySelector(".c-accounts-modal");e&&e.remove()}()}};return(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("span",{className:l()(a+"__login-cta-span"),children:"Already a subscriber?"}),(0,n.jsx)("button",{className:l()(p().signinLink,a+"__login-cta-button"),"data-testid":"signin-link","data-action":"".concat(s,":click_login"),"data-label":a,onClick:function(){var e=document.createElement("div");e.className="c-accounts-modal",e.classList.add(p().modalContainer);var t=document.createElement("iframe");t.src="https://accounts.theatlantic.com/login/modal/",t.title="Login Modal",t.id="accounts-modal",t.classList.add(p().modalContent),e.appendChild(t),document.body.append(e),c.iframeResizer({log:!1,messageCallback:i},"#accounts-modal")},children:"Sign in"})]})},_=function(e){var t=e.text,a=e.source,s=e.count,i=e.isExpandedStyles,d=e.isCentered,o=void 0!==d&&d,r=e.mobileOnly,c=void 0!==r&&r,u="gate"===a?"gateway:click_see_plans":"nudge:click_subscribe",m="gate"===a?a:"nudge";return(0,n.jsx)("a",{href:"https://accounts.theatlantic.com/products/?source=".concat(m).concat(s||""),"data-testid":"subscribe-cta","data-action":u,"data-label":a,className:l()(p().button,c&&p().mobileOnly,o&&p().centered,i?p().expandedLink:p().compressedLink,"gate"===a?"gate__primary-link":a+"__primary-link"+(c?"--mobile":"--desktop")),children:t})};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var h=s.createElement("path",{d:"M4.668 4.986a.467.467 0 01.67 0L1.625 1.223a.943.943 0 00-1.346 0 .974.974 0 000 1.364L3.992 6.35a1.419 1.419 0 002.022 0l3.707-3.757a.974.974 0 000-1.365.943.943 0 00-1.346 0L4.668 4.986z"});var b=function(e){var t=e.title,a=e.titleId,n=x(e,["title","titleId"]);return s.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 7","aria-labelledby":a},n),t?s.createElement("title",{id:a},t):null,h)},f=a(5470),v=a.n(f),y=function(e){var t=e.title,a=e.subtitle,s=e.count,i=e.pageViews,d=e.lastArticle,o=e.countText,r=e.setShowExpanded,c=e.setSlidingDirection;return(0,n.jsxs)("div",{className:v().root,id:"nudgeExpanded","data-testid":"nudge","data-category":"nudge interaction","data-label":"nudge-expanded",children:[(0,n.jsxs)("div",{className:v().mobileCta,children:[!d&&(0,n.jsx)("span",{className:l()(v().countMobile,"nudge-expanded__article-count-number--mobile"),children:s}),(0,n.jsx)("span",{className:l()(v().countTextMobile,d&&v().emphasizedText,"nudge-expanded__article-count-text--mobile"),children:o})]}),(0,n.jsxs)("div",{className:v().cta,"data-action":"nudge:display","data-label":"nudge-expanded",children:[!d&&(0,n.jsx)("span",{className:l()(v().count,"nudge-expanded__article-count-number--desktop"),children:s}),(0,n.jsx)("span",{className:l()(v().countText,d&&v().emphasizedText,"nudge-expanded__article-count-text--desktop"),children:o}),(0,n.jsx)(m,{includeText:!0,source:"nudge-expanded"})]}),(0,n.jsxs)("div",{className:v().text,children:[(0,n.jsx)("h3",{className:l()(v().title,"nudge-expanded__title--desktop"),children:t}),(0,n.jsx)("h4",{className:l()(v().subtitle,"nudge-expanded__subtitle--desktop"),children:a})]}),(0,n.jsx)(_,{text:"Subscribe Now",source:"nudge-expanded",count:i,isExpandedStyles:!0}),(0,n.jsx)("button",{className:l()(p().chevron,v().chevronExpanded),"aria-label":"Hide subscription information","aria-pressed":"true","data-action":"nudge:user_collapse","data-label":"nudge-expanded",onClick:function(){c("down"),setTimeout((function(){r(!1),c("none")}),100)},children:(0,n.jsx)(b,{focusable:"false"})})]})};function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var w=s.createElement("path",{d:"M5.332 2.728a.467.467 0 01-.67 0l3.713 3.763a.943.943 0 001.346 0 .974.974 0 000-1.364L6.008 1.364a1.419 1.419 0 00-2.022 0L.279 5.12a.974.974 0 000 1.365.943.943 0 001.346 0l3.707-3.758z"});var E=function(e){var t=e.title,a=e.titleId,n=j(e,["title","titleId"]);return s.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 7","aria-labelledby":a},n),t?s.createElement("title",{id:a},t):null,w)},T=a(8065),C=a.n(T),S=function(e){var t=e.title,a=e.count,s=e.pageViews,i=e.firstArticle,d=e.lastArticle,o=e.mobileTitle,r=e.setShowExpanded,c=e.setManuallyExpanded,u=e.setSlidingDirection;return(0,n.jsxs)("div",{className:C().root,id:"nudge","data-testid":"nudge","data-category":"nudge interaction","data-label":"nudge-compressed",children:[(0,n.jsxs)("div",{className:C().desktop,"data-action":"nudge:display","data-label":"nudge-compressed",children:[(0,n.jsxs)("div",{className:C().text,children:[!i&&!d&&(0,n.jsx)("span",{className:l()(C().count,"nudge-compressed__article-count-number--desktop"),children:a}),(0,n.jsx)("h3",{className:l()(C().title,C().borderRight,d&&C().emphasizedText,"nudge-compressed__title--desktop"),children:t}),(0,n.jsx)(m,{includeText:!1,source:"nudge-compressed"})]}),(0,n.jsx)(_,{text:"Subscribe Now",source:"nudge-compressed",count:s,isExpandedStyles:!1})]}),(0,n.jsxs)("div",{className:C().mobileTitleContainer,children:[i&&(0,n.jsx)(_,{text:o,source:"nudge-compressed",count:s,isExpandedStyles:!1,isCentered:!0,mobileOnly:!0}),!i&&(0,n.jsxs)("div",{className:C().textMobile,children:[0!=a&&1!=a&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:l()(C().count,"nudge-compressed__article-count-number--mobile"),children:a}),(0,n.jsx)("h3",{className:l()(C().title,"nudge-compressed__article-count-text--mobile"),children:"more free articles"})]}),1===a&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:l()(C().count,"nudge-compressed__article-count-number--mobile"),children:a}),(0,n.jsx)("h3",{className:l()(C().title,"nudge-compressed__article-count-text--mobile"),children:"more free article"})]}),0===a&&(0,n.jsx)("div",{children:(0,n.jsx)("h3",{className:l()(C().emphasizedText,"nudge-compressed__article-count-text--mobile"),children:"This is your last free article."})}),(0,n.jsx)(_,{text:"Subscribe Now",source:"nudge-compressed",count:s,isExpandedStyles:!1,isCentered:!1,mobileOnly:!0})]})]}),(0,n.jsx)("button",{className:l()(p().chevron,C().chevronCompressed),"aria-label":"Read more","aria-pressed":"false","data-action":"nudge:user_expand","data-label":"nudge-compressed",onClick:function(){u("up"),setTimeout((function(){r(!0),c(!0),u("none")}),100)},children:(0,n.jsx)(E,{focusable:"false"})})]})},k=a(8314),O=function(e){var t=e.cap,a=e.displayCap,i=e.pageViews,d=e.setSlidingDirection,o=t-i,r=a-i,l=1===o,c=2===o,u=1===i,p=u||l,m=(0,s.useState)(p),_=m[0],g=m[1],x=(0,s.useState)(!1),h=x[0],b=x[1];(0,s.useEffect)((function(){var e,t=function(){window.scrollY>100&&!h&&_&&(d("down"),e=setTimeout((function(){g(!1),d("none")}),100),(0,k.z6)().push({event:"Nudge Scroll",category:"nudge interaction",action:"nudge:scroll_collapse",label:"nudge-compressed"}))};return window.addEventListener("scroll",t,{passive:!0}),function(){window.removeEventListener("scroll",t),e&&clearTimeout(e)}}),[_,h,d]);var f="";f=l?"Never miss a story from The Atlantic.":u?"Thank you for reading The Atlantic.":"Discover new ideas. Rethink old assumptions.";var v="";v=l?"Get unlimited access to all of our journalism.":u?"Enjoy unlimited access to all of our journalism.":"Get unlimited access to The Atlantic.";var N="";N=l?"This is your last free article.":c?"more article this month":"more articles this month";var j="";return j=l?"This is your last free article.":u?"Enjoy unlimited access to The Atlantic.":c?"more free article this month":"more free articles this month",_?(0,n.jsx)(y,{title:f,subtitle:v,count:r,pageViews:i,lastArticle:l,countText:N,setShowExpanded:g,setSlidingDirection:d}):(0,n.jsx)(S,{title:j,count:r,pageViews:i,firstArticle:u,lastArticle:l,mobileTitle:"Subscribe for unlimited access",setShowExpanded:g,setManuallyExpanded:b,setSlidingDirection:d})},L=a(7298),A=a.n(L),M=function(){return(0,s.useEffect)((function(){return document.body.classList.add(A().withGate),function(){return document.body.classList.remove(A().withGate)}})),(0,n.jsxs)("div",{className:A().root,"data-category":"gateway interaction",children:[(0,n.jsx)("div",{className:A().shadow}),(0,n.jsxs)("div",{className:A().container,id:"gate","data-testid":"gate","aria-labelledby":"gate","data-action":"gateway:display","data-label":"gate",children:[(0,n.jsx)("p",{className:l()(A().gateText,"gate__text"),children:"We hope you've enjoyed your free articles."}),(0,n.jsx)("p",{className:l()(A().gateTitle,"gate__title"),children:"Don't miss another story. Subscribe today."}),(0,n.jsx)("p",{className:l()(A().gateText,"gate__dek"),children:"Subscribers enjoy unlimited access."}),(0,n.jsx)("div",{className:l()(A().spacingContainer,"gate__spacing-container"),children:(0,n.jsx)(_,{text:"See Plans",source:"gate",isExpandedStyles:!0,isCentered:!0})}),(0,n.jsx)(m,{includeText:!0,source:"gate"})]})]})},z=a(2857),P=a.n(z),G=a(2316),D=function(){(0,G.v)("Three-Article-Meter-Holdout");var e=(0,G.A)(),t=(0,s.useState)("none"),a=t[0],d=t[1],r=(0,i.aC)().hasPaywallAccess,c=o().get().articleViews||"[]",u=JSON.parse(c).length,p=(0,s.useState)(!1),m=p[0],_=p[1],g=3;"Three-Article-Meter-Holdout.3ArticleLimit"===e&&(g=4);var x=g-1,h=u<g,b=u>=g;return(0,s.useEffect)((function(){_(!0)}),[]),r||!m?null:(0,n.jsxs)("aside",{className:l()(P().root,"up"===a&&P().slideUp,"down"===a&&P().slideDown),id:"paywall","data-testid":"paywall","data-category":"nudge interaction","data-label":"paywall",children:[b&&(0,n.jsx)(M,{}),h&&(0,n.jsx)(O,{cap:g,displayCap:x,pageViews:u,setSlidingDirection:d})]})}},7298:function(e){e.exports={root:"Gate_root__3hCZo",withGate:"Gate_withGate__23WdV",container:"Gate_container__2gAWR",spacingContainer:"Gate_spacingContainer__1T7Kd",shadow:"Gate_shadow__3JaBj",gateText:"Gate_gateText__1XmVM",gateTitle:"Gate_gateTitle__qO4fU"}},8065:function(e){e.exports={root:"NudgeCompressed_root__2x2Bi",desktop:"NudgeCompressed_desktop__3hO3y",text:"NudgeCompressed_text__2ErfP",textMobile:"NudgeCompressed_textMobile__1-zjv",title:"NudgeCompressed_title__1HP0k",emphasizedText:"NudgeCompressed_emphasizedText__2aDca",borderRight:"NudgeCompressed_borderRight__3vzzL",mobileTitleContainer:"NudgeCompressed_mobileTitleContainer__IsrQq",count:"NudgeCompressed_count__3gXqx",chevronCompressed:"NudgeCompressed_chevronCompressed__pkP4P"}},5470:function(e){e.exports={root:"NudgeExpanded_root__2zWdK",cta:"NudgeExpanded_cta__WBL0y",mobileCta:"NudgeExpanded_mobileCta___IxWr",text:"NudgeExpanded_text__PCtQh",title:"NudgeExpanded_title__2OsV5",subtitle:"NudgeExpanded_subtitle__1-Iw0",count:"NudgeExpanded_count__2nerH",countMobile:"NudgeExpanded_countMobile__1teT_",emphasizedText:"NudgeExpanded_emphasizedText__1Ut4x",countText:"NudgeExpanded_countText__4nYHL",countTextMobile:"NudgeExpanded_countTextMobile__907sd",chevronExpanded:"NudgeExpanded_chevronExpanded__3LT3g"}},2033:function(e){e.exports={button:"NudgeShared_button__30CBb",expandedLink:"NudgeShared_expandedLink__3i9X0",compressedLink:"NudgeShared_compressedLink__1VGvd",signinLink:"NudgeShared_signinLink__1ru0x",mobileOnly:"NudgeShared_mobileOnly__xZd1p",centered:"NudgeShared_centered__nYvhh",modalContainer:"NudgeShared_modalContainer__2tiXv",modalContent:"NudgeShared_modalContent__2u0wH",chevron:"NudgeShared_chevron__2fydO"}},2857:function(e){e.exports={root:"Paywall_root__3-sty",slideDown:"Paywall_slideDown__14Iph",slideUp:"Paywall_slideUp__3osim"}}}]);
//# sourceMappingURL=475.836bde020f33de636f4e.js.map